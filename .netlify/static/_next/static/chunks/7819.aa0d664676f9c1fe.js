"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7063,7819],{27063:(e,t,r)=>{r.r(t),r.d(t,{Sheet:()=>c,SheetClose:()=>m,SheetContent:()=>p,SheetDescription:()=>b,SheetFooter:()=>y,SheetHeader:()=>x,SheetOverlay:()=>h,SheetPortal:()=>u,SheetTitle:()=>g,SheetTrigger:()=>d});var s=r(95155),a=r(12115),l=r(89511),i=r(83101),o=r(65229),n=r(64269);let c=l.bL,d=l.l9,m=l.bm,u=l.ZL,h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...a,ref:t})});h.displayName=l.hJ.displayName;let f=(0,i.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),p=a.forwardRef((e,t)=>{let{side:r="right",className:a,children:i,...c}=e;return(0,s.jsxs)(u,{children:[(0,s.jsx)(h,{}),(0,s.jsxs)(l.UC,{ref:t,className:(0,n.cn)(f({side:r}),a),...c,children:[i,(0,s.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=l.UC.displayName;let x=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...r})};x.displayName="SheetHeader";let y=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};y.displayName="SheetFooter";let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold text-foreground",r),...a})});g.displayName=l.hE.displayName;let b=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});b.displayName=l.VY.displayName},37819:(e,t,r)=>{r.r(t),r.d(t,{Sidebar:()=>D});var s=r(95155),a=r(12115),l=r(52619),i=r.n(l),o=r(20063),n=r(65993),c=r(78192),d=r(39142),m=r(41805),u=r(54690),h=r(89715),f=r(69124),p=r(42196),x=r(26667),y=r(54485),g=r(52987),b=r(14005),j=r(26368),v=r(97470),N=r(59427),w=r(37494),S=r(3998),C=r(27063),k=r(50168),A=r(72221),V=r(40105),I=r(86259),E=r(15239),F=r(17037);let D=(0,a.memo)(function(e){let{language:t,toggleLanguage:r}=e,l=(0,o.usePathname)(),D=(0,a.useMemo)(()=>k.Wk[t],[t]),H=(0,a.useContext)(A.s),{history:P}=(0,V.W)();if(!H)throw Error("Sidebar must be used within a LanguageProvider");let{theme:T,toggleTheme:L}=H,R=(0,a.useMemo)(()=>[{href:"/home",label:D.home,icon:n.A},{href:"/ai-assistant",label:"AI Assistant",icon:c.A,premium:!0},{href:"/voice-transcript",label:D.voiceScribe,icon:d.A},{href:"/text-to-speech",label:"Text to Speech",icon:m.A},{href:"/generate-qr-code",label:"Generate QR Code",icon:u.A},{href:"/pdf-transcript",label:D.pdfTranscript,icon:h.A},{href:"/combine-pdf",label:D.combinePdf,icon:f.A},{href:"/image-to-pdf",label:D.imageToPdf,icon:p.A},{href:"/convert-image-format",label:D.convertImageFormat,icon:x.A}],[D]),_=(0,a.useMemo)(()=>P.sort((e,t)=>t.timestamp-e.timestamp).slice(0,3).map(e=>{let t=R.find(t=>t.href===e.href);return{...e,icon:(null==t?void 0:t.icon)||y.A}}),[P,R]);return(0,s.jsxs)("aside",{className:"w-full h-full flex flex-col bg-transparent",children:[(0,s.jsx)("div",{className:"flex-shrink-0 p-4 border-b",children:(0,s.jsx)("div",{className:"flex justify-between items-center mb-3",children:(0,s.jsxs)(i(),{href:"/home",className:"flex items-center gap-2",children:[(0,s.jsx)(E.default,{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRfXQ6IUyl8D8fpZl8p9BvXg-PCxKPa-1vOp0oPC2-uKH-H_M1T",alt:"logo",width:32,height:32,"data-ai-hint":"logo",className:"rounded-full"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold",children:"Somleng"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Version 2.2.5"})]})]})})}),(0,s.jsxs)(F.F,{className:"flex-grow",children:[(0,s.jsx)("nav",{className:"p-4 space-y-1",children:R.map(e=>(0,s.jsx)(i(),{href:e.href,passHref:!0,children:(0,s.jsxs)(S.$,{variant:l===e.href?"secondary":"ghost",className:"w-full justify-start text-sm py-3 relative",type:"button",children:[(0,s.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),e.label,e.premium&&(0,s.jsx)("span",{className:"ml-auto text-xs bg-gradient-to-r from-blue-500 to-purple-600 text-white px-2 py-1 rounded-full",children:"Premium"})]})},e.href))}),P.length>0&&(0,s.jsxs)("div",{className:"p-4 pt-0",children:[(0,s.jsx)(I.w,{className:"my-2"}),(0,s.jsx)("h2",{className:"mb-2 mt-4 px-2 text-lg font-semibold tracking-tight flex items-center",children:D.history}),(0,s.jsx)("div",{className:"space-y-1",children:_.map(e=>(0,s.jsx)(i(),{href:e.href,passHref:!0,children:(0,s.jsxs)(S.$,{variant:"ghost",className:"w-full justify-start text-sm py-3",type:"button",children:[(0,s.jsx)(e.icon,{className:"mr-3 h-5 w-5"}),e.label]})},"history-".concat(e.href)))}),P.length>3&&(0,s.jsx)(i(),{href:"/history",passHref:!0,children:(0,s.jsxs)(S.$,{variant:"link",className:"w-full justify-start text-sm py-3 text-primary",type:"button",children:[(0,s.jsx)(g.A,{className:"mr-3 h-5 w-5"}),D.seeAll]})})]})]}),(0,s.jsxs)("div",{className:"flex-shrink-0 p-4 border-t mt-auto",children:[(0,s.jsxs)(C.Sheet,{children:[(0,s.jsx)(C.SheetTrigger,{asChild:!0,children:(0,s.jsxs)(S.$,{variant:"ghost",className:"w-full justify-start",type:"button",children:[(0,s.jsx)(b.A,{className:"mr-3 h-5 w-5"}),D.support]})}),(0,s.jsxs)(C.SheetContent,{side:"bottom",className:"rounded-t-lg h-[80vh] flex flex-col bg-background border-t shadow-lg",children:[(0,s.jsxs)(C.SheetHeader,{className:"text-center mb-4",children:[(0,s.jsx)(C.SheetTitle,{children:(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(b.A,{}),D.support]})}),(0,s.jsx)(C.SheetDescription,{children:D.supportDescription})]}),(0,s.jsx)("div",{className:"flex-grow flex justify-center items-center",children:(0,s.jsx)("div",{className:"h-full w-full max-w-sm rounded-md border border-border overflow-hidden",children:(0,s.jsx)("iframe",{src:"https://pay-coffee.vercel.app/",className:"w-full h-full",title:"Support"})})})]})]}),(0,s.jsx)(i(),{href:"https://t.me/Ozo0_0",target:"_blank",rel:"noopener noreferrer",passHref:!0,children:(0,s.jsxs)(S.$,{variant:"ghost",className:"w-full justify-start mt-2",type:"button",children:[(0,s.jsx)(j.A,{className:"mr-3 h-5 w-5"}),D.reportBug]})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,s.jsxs)(S.$,{variant:"ghost",onClick:r,className:"w-full justify-start",type:"button",children:[(0,s.jsx)(v.A,{className:"mr-3 h-5 w-5"}),(0,s.jsx)("span",{children:"en"===t?"ភាសាខ្មែរ":"English"})]}),(0,s.jsx)(S.$,{variant:"ghost",size:"icon",onClick:L,className:"flex-shrink-0",type:"button",children:"dark"===T?(0,s.jsx)(N.A,{className:"h-5 w-5"}):(0,s.jsx)(w.A,{className:"h-5 w-5"})})]})]})]})})},40105:(e,t,r)=>{r.d(t,{W:()=>l});var s=r(12115);let a="voiceScribeFeatureHistory";function l(){let[e,t]=(0,s.useState)([]),[r,l]=(0,s.useState)(!1),[i,o]=(0,s.useState)(!1),[n,c]=(0,s.useState)(null),d=(0,s.useRef)([]),m=(0,s.useRef)(null),u=(0,s.useCallback)(e=>e&&"object"==typeof e&&"string"==typeof e.id&&e.id.length>0&&"string"==typeof e.href&&e.href.length>0&&"string"==typeof e.label&&e.label.length>0&&"number"==typeof e.timestamp&&e.timestamp>0&&"number"==typeof e.count&&e.count>0&&"number"==typeof e.lastVisited&&e.lastVisited>0,[]),h=(0,s.useCallback)(()=>{let e=Date.now(),t=Math.random().toString(36).substr(2,9);return"hist_".concat(e,"_").concat(t)},[]),f=(0,s.useCallback)(e=>{m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{try{let t=e.filter(u).slice(0,100).sort((e,t)=>t.lastVisited-e.lastVisited);localStorage.setItem(a,JSON.stringify(t)),d.current=t,c(null)}catch(e){c("Failed to save history")}},300)},[u]),p=(0,s.useCallback)(async()=>{o(!0),c(null);try{let e=localStorage.getItem(a);if(!e){t([]),d.current=[];return}let r=JSON.parse(e);if(!Array.isArray(r))throw Error("Invalid history format: not an array");let s=r.map(e=>{try{let t={id:e.id||h(),href:e.href||"",label:e.label||"Unknown",timestamp:e.timestamp||Date.now(),count:Math.max(1,e.count||1),lastVisited:e.lastVisited||e.timestamp||Date.now(),favorite:!!e.favorite,category:e.category||"General",notes:e.notes||""};return u(t)?t:null}catch(e){return null}}).filter(e=>null!==e).sort((e,t)=>t.lastVisited-e.lastVisited);t(s),d.current=s,s.length!==r.length&&f(s)}catch(e){c("Failed to load history"),t([]),d.current=[]}finally{o(!1),l(!0)}},[u,h,f]);(0,s.useEffect)(()=>{p()},[p]),(0,s.useEffect)(()=>()=>{m.current&&clearTimeout(m.current)},[]);let x=(0,s.useCallback)(e=>{try{if(!e.href||!e.label||!e.timestamp)throw Error("Invalid history item: missing required fields");t(t=>{let r,s=Date.now(),a=t.findIndex(t=>t.href===e.href);if(-1!==a){let l=(r=t.map((t,r)=>r===a?{...t,label:e.label,timestamp:e.timestamp,lastVisited:s,count:t.count+1}:t))[a];r.splice(a,1),r.unshift(l)}else r=[{id:h(),href:e.href,label:e.label,timestamp:e.timestamp,lastVisited:s,count:1,favorite:!1,category:e.category||"General",notes:e.notes||""},...t];return r.length>100&&(r=r.slice(0,100)),f(r),r}),c(null)}catch(e){c("Failed to add history item")}},[h,f]),y=(0,s.useCallback)(r=>{try{if(!r||"string"!=typeof r)return c("Invalid item ID provided"),!1;if(!e.some(e=>e.id===r))return c("History item not found"),!1;return t(e=>{let t=e.filter(e=>e.id!==r);return f(t),t}),c(null),!0}catch(e){return c("Failed to delete history item"),!1}},[e,f]),g=(0,s.useCallback)((r,s)=>{try{if(!r||"string"!=typeof r)throw Error("Invalid item ID");if(!e.some(e=>e.id===r))return!1;return t(e=>{let t=e.map(e=>e.id===r?{...e,...s,id:e.id}:e);return f(t),t}),c(null),!0}catch(e){return c("Failed to update history item"),!1}},[e,f]),b=(0,s.useCallback)(()=>{try{t([]),d.current=[],localStorage.removeItem(a),c(null)}catch(e){c("Failed to clear history")}},[]),j=(0,s.useCallback)(r=>{try{if(!r||"string"!=typeof r)return c("Invalid item ID provided"),!1;let s=e.find(e=>e.id===r);if(!s)return c("History item not found"),!1;let a=!s.favorite;return t(e=>{let t=e.map(e=>e.id===r?{...e,favorite:a}:e);return f(t),t}),c(null),a}catch(e){return c("Failed to toggle favorite"),!1}},[e,f]),v=(0,s.useCallback)(t=>{try{if(!t||"string"!=typeof t||""===t.trim())return e;let r=t.toLowerCase().trim();return e.filter(e=>{var t,s;return e.label.toLowerCase().includes(r)||e.href.toLowerCase().includes(r)||(null==(t=e.category)?void 0:t.toLowerCase().includes(r))||(null==(s=e.notes)?void 0:s.toLowerCase().includes(r))})}catch(e){return c("Failed to search history"),[]}},[e]),N=(0,s.useCallback)(()=>{try{let t=e.reduce((e,t)=>e+t.count,0),r=e.length,s=e.filter(e=>e.favorite).length,a=[...e].sort((e,t)=>t.count-e.count).slice(0,10),l=[...e].sort((e,t)=>t.lastVisited-e.lastVisited).slice(0,10),i={};return e.forEach(e=>{let t=e.category||"General";i[t]=(i[t]||0)+e.count}),{totalVisits:t,uniquePages:r,favoritePages:s,mostVisited:a,recentVisits:l,categories:i}}catch(e){return{totalVisits:0,uniquePages:0,favoritePages:0,mostVisited:[],recentVisits:[],categories:{}}}},[e]),w=(0,s.useCallback)(t=>{try{if(!t||"string"!=typeof t)return e;let r=t.toLowerCase().trim();return e.filter(e=>{var t;return(null==(t=e.category)?void 0:t.toLowerCase())===r})}catch(e){return[]}},[e]),S=(0,s.useCallback)(()=>{try{let t={version:"1.0",exportDate:new Date().toISOString(),appName:"SomlengP Voice Features",history:e};return JSON.stringify(t,null,2)}catch(e){throw Error("Failed to export history")}},[e]),C=(0,s.useCallback)(r=>{let s=[],a=0;try{let l=JSON.parse(r);if(!l.history||!Array.isArray(l.history))throw Error("Invalid export format: missing history array");let i=[];return l.history.forEach((t,r)=>{try{let l={id:t.id||h(),href:t.href||"",label:t.label||"Imported Item",timestamp:t.timestamp||Date.now(),lastVisited:t.lastVisited||t.timestamp||Date.now(),count:Math.max(1,t.count||1),favorite:!!t.favorite,category:t.category||"General",notes:t.notes||""};u(l)?!e.some(e=>e.href===l.href)&&(i.push(l),a++):s.push("Item ".concat(r+1,": Invalid item format"))}catch(e){s.push("Item ".concat(r+1,": ").concat(e))}}),i.length>0&&t(e=>{let t=[...i,...e].sort((e,t)=>t.lastVisited-e.lastVisited).slice(0,100);return f(t),t}),{success:!0,imported:a,errors:s}}catch(e){return{success:!1,imported:0,errors:["Failed to parse import data: ".concat(e)]}}},[e,u,h,f]);return{history:(0,s.useMemo)(()=>e,[e]),isLoaded:r,isLoading:i,error:n,addHistoryItem:x,deleteHistoryItem:y,updateHistoryItem:g,clearHistory:b,toggleFavorite:j,searchHistory:v,getHistoryStats:N,getHistoryByCategory:w,exportHistory:S,importHistory:C}}},86259:(e,t,r)=>{r.d(t,{w:()=>o});var s=r(95155),a=r(12115),l=r(57268),i=r(64269);let o=a.forwardRef((e,t)=>{let{className:r,orientation:a="horizontal",decorative:o=!0,...n}=e;return(0,s.jsx)(l.b,{ref:t,decorative:o,orientation:a,className:(0,i.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",r),...n})});o.displayName=l.b.displayName}}]);