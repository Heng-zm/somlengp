"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1404],{31404:(t,e,n)=>{n.d(e,{exportTranscript:()=>l});var r=n(26725);function o(t){let e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=Math.floor(t%60),o=Math.round((t-Math.floor(t))*1e3),a=t=>t.toString().padStart(2,"0");return"".concat(a(e),":").concat(a(n),":").concat(a(r),",").concat(o.toString().padStart(3,"0"))}function a(t){let e=Math.floor(t/3600),n=Math.floor(t%3600/60),r=Math.floor(t%60),o=Math.round((t-Math.floor(t))*1e3),a=t=>t.toString().padStart(2,"0"),c=t=>t.toString().padStart(3,"0");return e>0?"".concat(a(e),":").concat(a(n),":").concat(a(r),".").concat(c(o)):"".concat(a(n),":").concat(a(r),".").concat(c(o))}function c(t,e){var n,r;if(!t.length||e<=0)return[];let o=[],a=[],c=null!=(r=null==(n=t[0])?void 0:n.start)?r:0;for(let n of t)if(a.length>0&&n.start>=c+e){let t=a.map(t=>t.text).join(" ").trim(),e=a[a.length-1].end;o.push({text:t,start:c,end:e}),a=[n],c=n.start}else 0===a.length&&(c=n.start),a.push(n);if(a.length>0){let t=a.map(t=>t.text).join(" ").trim(),e=a[a.length-1].end;o.push({text:t,start:c,end:e})}return o}async function i(t){let e=new r.yoT({sections:[{properties:{},children:t.split("\n").map(t=>new r.fzL({children:[new r.NTc(t)]}))}]});return await r.ND6.toBlob(e)}async function l(t,e,n,r,l){if(!t.trim()&&"json"!==e&&"csv"!==e&&"docx"!==e)return void r({title:"Export Failed",description:"There is no text to export.",variant:"destructive"});let s=null,d="transcript",u="text/plain";switch(e){case"srt":if(s=function(t,e,n){if(!e||0===e.length)return null;let r="",a=n?60/n:0;return a>0?c(e,a).forEach((t,e)=>{r+="".concat(e+1,"\n"),r+="".concat(o(t.start)," --\x3e ").concat(o(t.end),"\n"),r+="".concat(t.text,"\n\n")}):e.forEach((t,e)=>{r+="".concat(e+1,"\n"),r+="".concat(o(t.start)," --\x3e ").concat(o(t.end),"\n"),r+="".concat(t.text,"\n\n")}),r}(0,n,l),d+=".srt",!s)return void r({title:"Export Failed",description:"Word timings not available for SRT export. Try using the 'Words per second' setting.",variant:"destructive"});break;case"vtt":if(s=function(t,e,n){if(!e||0===e.length)return null;let r="WEBVTT\n\n",o=n?60/n:0;return o>0?c(e,o).forEach(t=>{r+="".concat(a(t.start)," --\x3e ").concat(a(t.end),"\n"),r+="".concat(t.text,"\n\n")}):e.forEach(t=>{r+="".concat(a(t.start)," --\x3e ").concat(a(t.end),"\n"),r+="".concat(t.text,"\n\n")}),r}(0,n,l),d+=".vtt",u="text/vtt",!s)return void r({title:"Export Failed",description:"Word timings not available for VTT export. Try using the 'Words per second' setting.",variant:"destructive"});break;case"txt":s=t,d+=".txt";break;case"json":if(s=0===n.length?null:JSON.stringify(n,null,2),d+=".json",u="application/json",!s)return void r({title:"Export Failed",description:"No structured transcript available for JSON export.",variant:"destructive"});break;case"csv":if(s=function(t){if(0===t.length)return null;let e="text,start,end\n";return t.forEach(t=>{let n='"'.concat(t.text.replace(/"/g,'""'),'"');e+="".concat(n,",").concat(t.start,",").concat(t.end,"\n")}),e}(n),d+=".csv",u="text/csv",!s)return void r({title:"Export Failed",description:"No structured transcript available for CSV export.",variant:"destructive"});break;case"docx":try{s=await i(t),d+=".docx",u="application/vnd.openxmlformats-officedocument.wordprocessingml.document"}catch(t){r({title:"Export Failed",description:"Could not create DOCX file.",variant:"destructive"});return}break;default:r({title:"Export Failed",description:"Unsupported export format.",variant:"destructive"});return}s&&function(t,e,n){let r=t instanceof Blob?t:new Blob([t],{type:n}),o=URL.createObjectURL(r),a=document.createElement("a");a.href=o,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}(s,d,u)}}}]);