"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5469],{65142:(e,t,s)=>{s.d(t,{p:()=>i});var a=s(95155),r=s(12115),l=s(64269);let i=r.forwardRef((e,t)=>{let{className:s,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});i.displayName="Input"},65469:(e,t,s)=>{s.r(t),s.d(t,{AIAssistantWidget:()=>S});var a=s(95155),r=s(12115),l=s(20063),i=s(92280),o=s(3998),n=s(86948),d=s(65142),c=s(17037),m=s(85897),h=s(11647),x=s(86259),u=s(5937),g=s(95740),p=s(97624),v=s(37354),b=s(65229),f=s(20508),w=s(78192),j=s(75426),y=s(89559),N=s(18085),k=s(69975),A=s(64269),C=s(88309),I=s(75898),z=s(71408);let S=(0,r.memo)(function(e){let{className:t,variant:s="compact"}=e,{user:S}=(0,i.A)(),E=(0,l.useRouter)(),[O,P]=(0,r.useState)(!1),[D,T]=(0,r.useState)("expanded"===s),[R,$]=(0,r.useState)([]),[q,F]=(0,r.useState)(""),[M,_]=(0,r.useState)(!1),[B,W]=(0,r.useState)(!1),H=(0,r.useRef)(null),K=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(H.current){let e=H.current.querySelector("[data-radix-scroll-area-viewport]");e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}},[R,B]),(0,r.useEffect)(()=>{O&&0===R.length&&$([{id:(0,C.Ok)(),role:"assistant",content:"Hi! \uD83D\uDC4B I'm your AI assistant. I can help with questions, creative tasks, and more. What can I do for you today?",timestamp:new Date}])},[O,R.length]),(0,r.useEffect)(()=>{O&&K.current&&setTimeout(()=>{var e;return null==(e=K.current)?void 0:e.focus()},100)},[O]);let Z=(0,r.useCallback)(async()=>{if(!q.trim()||M)return;if(!S)return void(0,k.ij)("the AI Assistant");let e={id:(0,C.Ok)(),role:"user",content:q.trim(),timestamp:new Date};$(t=>[...t,e]),F(""),_(!0),W(!0);try{let t=await S.getIdToken(),s=await fetch("/api/ai-assistant",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({messages:[...R,e].map(e=>({role:e.role,content:e.content})),userId:S.uid})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to get response")}let a=await s.json(),r={id:(0,C.Ok)(),role:"assistant",content:a.response,timestamp:new Date};$(e=>[...e,r])}catch(s){let e=s instanceof Error?s.message:"Failed to send message. Please try again.";(0,k.xP)(e,!!S);let t={id:(0,C.Ok)(),role:"assistant",content:"I'm sorry, I encountered an error. Please try again or use the full AI Assistant page.",timestamp:new Date};$(e=>[...e,t])}finally{_(!1),W(!1)}},[S,R,q,M]),G=(0,r.useCallback)(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Z())},[Z]),J=(0,r.useCallback)(()=>{E.push("/ai-assistant")},[E]),L=(0,r.useCallback)(async e=>{try{await navigator.clipboard.writeText(e),(0,k.GF)("Copied!","Message copied to clipboard")}catch(e){(0,k.Ni)("Copy Error","Failed to copy message")}},[]);return O?(0,a.jsx)(I.P.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:(0,A.cn)("fixed z-50 bg-background border rounded-lg shadow-2xl",D?"bottom-2 right-2 left-2 sm:bottom-4 sm:right-4 sm:left-auto w-auto sm:w-96 h-[calc(100vh-1rem)] sm:h-[500px] max-h-[calc(100vh-1rem)]":"bottom-4 right-4 left-4 sm:bottom-6 sm:right-6 sm:left-auto w-auto sm:w-80 h-80 sm:h-96 max-h-[calc(100vh-8rem)]",t),children:(0,a.jsxs)(n.Zp,{className:"h-full flex flex-col",children:[(0,a.jsx)(n.aR,{className:"p-4 pb-2",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,a.jsx)(g.A,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.ZB,{className:"text-sm font-semibold",children:"AI Assistant"}),(0,a.jsx)("div",{className:"flex items-center space-x-1",children:(0,a.jsx)(h.E,{variant:"outline",className:"text-xs px-2 py-0 h-5 bg-green-50 text-green-700 border-green-200 dark:bg-green-950/20 dark:text-green-400 dark:border-green-800",children:"Online"})})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>T(!D),className:"h-8 w-8 p-0 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 transition-all duration-200 hover:scale-105 active:scale-95",title:D?"Minimize window":"Maximize window","aria-label":D?"Minimize window":"Maximize window",children:D?(0,a.jsx)(p.A,{className:"h-4 w-4"}):(0,a.jsx)(v.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:J,className:"h-8 w-8 p-0 rounded-lg hover:bg-violet-100 dark:hover:bg-violet-900/20 text-slate-600 hover:text-violet-700 dark:text-slate-400 dark:hover:text-violet-400 transition-all duration-200 hover:scale-105 active:scale-95",title:"Open full AI Assistant page","aria-label":"Open full AI Assistant page",children:(0,a.jsx)(u.A,{className:"h-4 w-4"})}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>P(!1),className:"h-8 w-8 p-0 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/20 text-slate-600 hover:text-red-700 dark:text-slate-400 dark:hover:text-red-400 transition-all duration-200 hover:scale-105 active:scale-95",title:"Close AI Assistant","aria-label":"Close AI Assistant",children:(0,a.jsx)(b.A,{className:"h-4 w-4"})})]})]})}),(0,a.jsx)(x.w,{}),(0,a.jsxs)(n.Wu,{className:"p-0 flex-1 flex flex-col min-h-0",children:[(0,a.jsx)(c.F,{className:"flex-1 p-3",ref:H,children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(z.N,{children:R.map(e=>(0,a.jsxs)(I.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:(0,A.cn)("flex items-start space-x-2","user"===e.role?"flex-row-reverse space-x-reverse":""),children:[(0,a.jsx)(m.eu,{className:"w-6 h-6 flex-shrink-0 ring-1 ring-white/20",children:"user"===e.role?(0,a.jsx)(m.q5,{className:"bg-blue-500 text-white text-xs",children:(0,a.jsx)(f.A,{className:"w-3 h-3"})}):(0,a.jsx)(m.q5,{className:"bg-gradient-to-br from-purple-500 to-blue-600 text-white text-xs",children:(0,a.jsx)(w.A,{className:"w-3 h-3"})})}),(0,a.jsx)("div",{className:(0,A.cn)("flex-1 max-w-[80%]","user"===e.role?"flex flex-col items-end":""),children:(0,a.jsxs)("div",{className:"group relative",children:[(0,a.jsxs)("div",{className:(0,A.cn)("rounded-lg p-2 text-xs relative","user"===e.role?"bg-blue-500 text-white":"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-gray-100"),children:[(0,a.jsx)("div",{className:"whitespace-pre-wrap break-words",children:e.content}),(0,a.jsx)(o.$,{variant:"ghost",size:"sm",className:(0,A.cn)("absolute -top-1.5 -right-1.5 h-6 w-6 p-0 rounded-full transition-all duration-300 transform hover:scale-110 active:scale-95","opacity-100 sm:opacity-0 sm:group-hover:opacity-100","user"===e.role?"bg-blue-600/90 hover:bg-blue-500/95 text-white shadow-sm shadow-blue-500/30 border border-blue-400/30":"bg-white/95 dark:bg-slate-700/90 hover:bg-slate-50 dark:hover:bg-slate-600/90 text-slate-600 dark:text-slate-300 shadow-sm shadow-slate-500/15 border border-slate-200/70 dark:border-slate-600/70"),onClick:()=>L(e.content),title:"Copy message","aria-label":"Copy message to clipboard",children:(0,a.jsx)(j.A,{className:"h-3 w-3"})})]}),(0,a.jsx)("p",{className:(0,A.cn)("text-xs text-gray-500 dark:text-gray-400 mt-1","user"===e.role?"text-right":"text-left"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})})]},e.id))}),B&&(0,a.jsxs)(I.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-start space-x-2",children:[(0,a.jsx)(m.eu,{className:"w-6 h-6",children:(0,a.jsx)(m.q5,{className:"bg-gradient-to-br from-purple-500 to-blue-600 text-white text-xs",children:(0,a.jsx)(w.A,{className:"w-3 h-3"})})}),(0,a.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-2",children:(0,a.jsxs)("div",{className:"flex space-x-1",children:[(0,a.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce [animation-delay:0.1s]"}),(0,a.jsx)("div",{className:"w-1 h-1 bg-gray-400 rounded-full animate-bounce [animation-delay:0.2s]"})]})})]})]})}),(0,a.jsx)(x.w,{}),(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.p,{ref:K,value:q,onChange:e=>F(e.target.value),onKeyPress:G,placeholder:"Ask me anything...",disabled:M,className:"flex-1 text-sm min-h-[44px] sm:h-8 border-2 rounded-lg"}),(0,a.jsx)(o.$,{size:"sm",onClick:Z,disabled:!q.trim()||M,className:"min-h-[44px] min-w-[44px] sm:h-8 sm:w-8 p-0 rounded-lg bg-gradient-to-r from-violet-500 to-purple-500 hover:from-violet-600 hover:to-purple-600 active:from-violet-700 active:to-purple-700 shadow-sm shadow-violet-500/25 hover:shadow-md hover:shadow-violet-500/30 transition-all duration-200 disabled:opacity-50 disabled:shadow-none disabled:cursor-not-allowed transform hover:scale-105 active:scale-95 backdrop-blur-sm border border-violet-400/20 hover:border-violet-300/30",title:M?"Sending message...":"Send message","aria-label":M?"Sending message...":"Send message",children:M?(0,a.jsx)(y.A,{className:"w-4 h-4 sm:w-3 sm:h-3 animate-spin text-white"}):(0,a.jsx)(N.A,{className:"w-4 h-4 sm:w-3 sm:h-3 text-white"})})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center hidden sm:block",children:"Press Enter to send"})]})]})]})}):(0,a.jsx)(I.P.div,{initial:{scale:0},animate:{scale:1},className:(0,A.cn)("fixed bottom-4 right-4 sm:bottom-6 sm:right-6 z-50",t),children:(0,a.jsx)(o.$,{size:"lg",onClick:()=>P(!0),className:"h-12 w-12 sm:h-14 sm:w-14 rounded-full bg-gradient-to-r from-violet-500 via-purple-500 to-indigo-500 hover:from-violet-600 hover:via-purple-600 hover:to-indigo-600 active:from-violet-700 active:via-purple-700 active:to-indigo-700 shadow-lg shadow-violet-500/30 hover:shadow-xl hover:shadow-violet-500/40 transition-all duration-300 min-h-[48px] min-w-[48px] transform hover:scale-110 active:scale-95 backdrop-blur-sm border border-violet-400/20 hover:border-violet-300/30",title:"Open AI Assistant","aria-label":"Open AI Assistant chat",children:(0,a.jsx)(u.A,{className:"h-5 w-5 sm:h-6 sm:w-6 text-white"})})})})},86259:(e,t,s)=>{s.d(t,{w:()=>o});var a=s(95155),r=s(12115),l=s(57268),i=s(64269);let o=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:o=!0,...n}=e;return(0,a.jsx)(l.b,{ref:t,decorative:o,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...n})});o.displayName=l.b.displayName}}]);